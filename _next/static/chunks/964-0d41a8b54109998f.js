"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{4269:(e,t,n)=>{n.d(t,{cn:()=>r});var a=n(2821),l=n(5889);function r(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,l.QP)((0,a.$)(t))}},5894:(e,t,n)=>{n.d(t,{dj:()=>u});var a=n(2115);let l=0,r=new Map,i=e=>{if(r.has(e))return;let t=setTimeout(()=>{r.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);r.set(e,t)},s=[],o={toasts:[]};function d(e){o=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:n}=t;return n?i(n):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===n||void 0===n?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(o,e),s.forEach(e=>{e(o)})}function c(e){let{...t}=e,n=(l=(l+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>d({type:"DISMISS_TOAST",toastId:n});return d({type:"ADD_TOAST",toast:{...t,id:n,open:!0,onOpenChange:e=>{e||a()}}}),{id:n,dismiss:a,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:n}})}}function u(){let[e,t]=a.useState(o);return a.useEffect(()=>(s.push(t),()=>{let e=s.indexOf(t);e>-1&&s.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},6041:(e,t,n)=>{n.d(t,{R:()=>a});var a=function(e){return e.Button="button",e.Text="text",e.Icon="icon",e.Image="image",e}({})},9832:(e,t,n)=>{n.d(t,{PageEditorProvider:()=>u,J:()=>E});var a=n(5155),l=n(2115),r=n(5894);let i=async(e,t)=>{let n=async e=>{let t=await fetch(e);if(t.ok)return t.json();throw Error("Failed to load ".concat(e))},a=e=>({...e,elements:e.elements.map((e,t)=>{var n;return{...e,zIndex:null!=(n=e.zIndex)?n:t+1,status:"idle"}})});try{let t=await n(e);return a(t)}catch(l){if(console.error("Failed to load ".concat(e),l),t)try{let e=await n("error.json");return a(e)}catch(e){console.error("Failed to load error.json",e)}throw Error("Failed to load initial configuration. Please make sure ".concat(e," exists in the public folder."))}},s={isMounted:!1,isEditMode:!1,isAuthenticated:!1,showPasswordPrompt:!1,passwordInput:"",config:{elements:[]},contextMenu:{visible:!1,x:0,y:0},editingElement:null,selectedElementIds:[],showJsonExport:!1,isPageLoading:!1,draggingState:null,resizingState:null,selectionBox:null,history:[]};function o(e,t){switch(t.type){case"SET_IS_MOUNTED":return{...e,isMounted:t.payload};case"SET_IS_EDIT_MODE":return{...e,isEditMode:t.payload};case"SET_IS_AUTHENTICATED":return{...e,isAuthenticated:t.payload};case"SET_SHOW_PASSWORD_PROMPT":return{...e,showPasswordPrompt:t.payload};case"SET_PASSWORD_INPUT":return{...e,passwordInput:t.payload};case"SET_CONFIG":return{...e,config:t.payload};case"UPDATE_ELEMENTS":let n=[...e.history];return t.payload.skipHistory||n.push({elements:e.config.elements,selectedElementIds:e.selectedElementIds||[]}),{...e,config:{...e.config,elements:t.payload.elements},history:n};case"SET_SELECTED_ELEMENT_IDS":let a=[...e.history];return t.payload.skipHistory||a.push({elements:e.config.elements,selectedElementIds:e.selectedElementIds||[]}),{...e,selectedElementIds:t.payload.selectedElementIds||[],history:a};case"UNDO":if(e.history.length>0){let t=[...e.history],n=t.pop();return{...e,config:{...e.config,elements:n.elements},selectedElementIds:n.selectedElementIds||[],history:t}}return e;case"SET_CONTEXT_MENU":return{...e,contextMenu:t.payload};case"SET_EDITING_ELEMENT":return{...e,editingElement:t.payload};case"SET_SHOW_JSON_EXPORT":return{...e,showJsonExport:t.payload};case"SET_IS_PAGE_LOADING":return{...e,isPageLoading:t.payload};case"SET_DRAGGING_STATE":return{...e,draggingState:t.payload};case"SET_RESIZING_STATE":return{...e,resizingState:t.payload};case"SET_SELECTION_BOX":return{...e,selectionBox:t.payload};default:return e}}var d=n(6041);let c=(0,l.createContext)(void 0),u=e=>{let{children:t}=e,n=function(){let[e,t]=l.useReducer(o,s),{toast:n}=(0,r.dj)(),a=l.useRef(null),c=l.useRef({x:0,y:0});l.useEffect(()=>{t({type:"SET_IS_MOUNTED",payload:!0});let e=new URLSearchParams(window.location.search).get("config");i(e?e.endsWith(".json")?e:"".concat(e,".json"):"configuration.json",e).then(e=>t({type:"SET_CONFIG",payload:e})).catch(e=>{n({variant:"destructive",title:"Failed to load initial configuration",description:e.message})})},[n,t]),l.useEffect(()=>{let t=e.config.elements.find(e=>"page-title"===e.id),n=t?t.text:"Dynamic Page";if(n&&(document.title=n),e.config.favicon){let t=document.querySelector("link[rel~='icon']");t||((t=document.createElement("link")).rel="icon",document.getElementsByTagName("head")[0].appendChild(t)),t.href=e.config.favicon}},[e.config]);let{handleEditModeToggle:u,handlePasswordSubmit:E}=function(e,t){let{toast:n}=(0,r.dj)(),{isAuthenticated:a,passwordInput:i,config:s}=e;return l.useEffect(()=>{if(s.editorPassword){let e=new URLSearchParams(window.location.search),a=e.get("editorPassword");a&&(a===s.editorPassword?(t({type:"SET_IS_AUTHENTICATED",payload:!0}),"true"===e.get("edit")&&t({type:"SET_IS_EDIT_MODE",payload:!0})):n({variant:"destructive",title:"Authentication Failed",description:"Incorrect password provided in URL."}))}},[s.editorPassword,n,t]),{handleEditModeToggle:l.useCallback(e=>{e&&!a?t({type:"SET_SHOW_PASSWORD_PROMPT",payload:!0}):(t({type:"SET_IS_EDIT_MODE",payload:e}),e||t({type:"SET_SELECTED_ELEMENT_IDS",payload:{selectedElementIds:[]}}))},[a,t]),handlePasswordSubmit:l.useCallback(()=>{i===(s.editorPassword||"admin")?(t({type:"SET_IS_AUTHENTICATED",payload:!0}),t({type:"SET_SHOW_PASSWORD_PROMPT",payload:!1}),t({type:"SET_PASSWORD_INPUT",payload:""}),"true"===new URLSearchParams(window.location.search).get("edit")&&t({type:"SET_IS_EDIT_MODE",payload:!0})):n({variant:"destructive",title:"Authentication Failed",description:"Incorrect password."})},[s.editorPassword,i,n,t])}}(e,t),{handleMouseDown:p,handleTouchStart:f,handleTouchMove:y,handleTouchEnd:m,handleContainerClick:h,handleCanvasMouseDown:T,handleResizeStart:S,handleContextMenu:_,closeContextMenu:g,addElement:I,deleteElement:w,openEditModal:D,handleUpdateElement:v,handleElementClick:x,getElementRect:b,handleMouseMove:C}=function(e,t,n,a){let{toast:i}=(0,r.dj)(),{isEditMode:s,selectedElementIds:o,config:c,draggingState:u,resizingState:E,isPageLoading:p,contextMenu:f}=e,y=l.useRef(null),m=l.useRef(!1),h=l.useRef({x:0,y:0}),T=l.useRef(null),S=l.useRef(!1),_=l.useRef(!1),g=l.useRef(!1),I=l.useRef(!1),w=l.useCallback(function(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t({type:"UPDATE_ELEMENTS",payload:{elements:e,skipHistory:n}})},[t]),D=l.useCallback(()=>{t({type:"SET_CONTEXT_MENU",payload:{visible:!1,x:0,y:0}})},[t]),v=l.useCallback(e=>{let t=Math.max(0,...c.elements.map(e=>e.zIndex||0)),a={id:Date.now().toString(),type:e,x:f.x,y:f.y,zIndex:t+1,text:e===d.R.Text?"New Text":void 0,icon:e===d.R.Icon?"Smile":void 0,src:e===d.R.Image?c.defaultImageUrl||"https://picsum.photos/seed/".concat(Date.now(),"/200/300"):void 0,width:e===d.R.Image?c.defaultImageWidth||200:void 0,height:e===d.R.Image?c.defaultImageHeight||300:void 0,aspectRatio:e===d.R.Image?(c.defaultImageWidth||200)/(c.defaultImageHeight||300):void 0,url:e===d.R.Button?c.defaultRestUrl:void 0,color:"#87CEEB",fontSize:16,fontFamily:"'PT Sans', sans-serif",status:"idle"};if(a.type===d.R.Button&&(a.text="New Button"),n.current){let e=n.current.getBoundingClientRect();a.x-=e.left,a.y-=e.top}w([...c.elements,a]),D()},[c.elements,c.defaultImageUrl,c.defaultRestUrl,c.defaultImageWidth,c.defaultImageHeight,f.x,f.y,w,D,n]),x=l.useCallback(()=>{o.length>0&&(w(c.elements.filter(e=>!o.includes(e.id))),t({type:"SET_SELECTED_ELEMENT_IDS",payload:{selectedElementIds:[],skipHistory:!0}})),D()},[c.elements,o,w,D,t]),b=l.useCallback(()=>{if(1===o.length){let e=c.elements.find(e=>e.id===o[0]);e&&t({type:"SET_EDITING_ELEMENT",payload:e})}D()},[c.elements,o,D,t]),C=l.useCallback(e=>{w(c.elements.map(t=>t.id===e.id?e:t)),t({type:"SET_EDITING_ELEMENT",payload:null})},[c.elements,w,t]),k=l.useCallback(async e=>{if(!s&&e.url){if(e.type===d.R.Text){if("back"===e.url.toLowerCase())window.history.back();else{let t=new URL(window.location.href).searchParams.get("editorPassword");if(t){let n=new URL(e.url,window.location.href);n.searchParams.set("editorPassword",t),window.open(n.toString(),"_self")}else window.open(e.url,"_self")}return}if(e.type===d.R.Button)try{let t=await fetch(e.url);if(!t.ok)throw Error("Request failed with status ".concat(t.status))}catch(e){i({variant:"destructive",title:"Request Failed",description:"The request to the specified URL failed."})}else{if(p)return;t({type:"SET_IS_PAGE_LOADING",payload:!0});try{let t=await fetch(e.url);if(!t.ok)throw Error("Request failed with status ".concat(t.status))}catch(e){i({variant:"destructive",title:"Request Failed",description:"The request to the specified URL failed."})}finally{t({type:"SET_IS_PAGE_LOADING",payload:!1})}}}},[s,p,i,t]),R=l.useCallback(function(e,n,a){let l,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!s)return;g.current=!1,t({type:"SET_SELECTED_ELEMENT_IDS",payload:{selectedElementIds:l=r?o.includes(e)?o.filter(t=>t!==e):[...o,e]:o.includes(e)?o:[e],skipHistory:!0}});let i=new Map;c.elements.forEach(e=>{l.includes(e.id)&&i.set(e.id,{x:e.x,y:e.y})}),t({type:"SET_DRAGGING_STATE",payload:{isDragging:!0,initialPositions:i,startX:n,startY:a}})},[s,o,c.elements,t]),P=l.useCallback((e,t)=>{if(!u||!n.current)return;g.current||(w(c.elements,!1),g.current=!0);let a=e-u.startX,l=t-u.startY;w(c.elements.map(e=>{let t=u.initialPositions.get(e.id);if(t){let n=t.x+a,r=t.y+l;return{...e,x:n,y:r}}return e}),!0)},[u,c.elements,w,n]),N=l.useCallback(()=>{u&&(g.current&&w(c.elements,!1),g.current=!1,t({type:"SET_DRAGGING_STATE",payload:null})),y.current&&(clearTimeout(y.current),y.current=null)},[u,t,c.elements,w]),A=l.useCallback((e,n)=>{if(e.stopPropagation(),!s)return;I.current=!1;let a=c.elements.find(e=>e.id===n);if(a&&a.width&&a.height)t({type:"SET_RESIZING_STATE",payload:{isResizing:!0,elementId:n,startX:"touches"in e?e.touches[0].clientX:e.clientX,startY:"touches"in e?e.touches[0].clientY:e.clientY,initialWidth:a.width,initialHeight:a.height}})},[s,c.elements,t]),M=l.useCallback((e,t)=>{if(!E||!E.isResizing)return;I.current||(w(c.elements,!1),I.current=!0);let n=e-E.startX,a=c.elements.find(e=>e.id===E.elementId);if(!a||!a.aspectRatio)return;let l=E.initialWidth+n,r=l/a.aspectRatio;w(c.elements.map(e=>e.id===E.elementId?{...e,width:Math.max(20,l),height:Math.max(20,r)}:e),!0)},[E,c.elements,w]),O=l.useCallback(()=>{(null==E?void 0:E.isResizing)&&(I.current=!1,t({type:"SET_RESIZING_STATE",payload:null}))},[E,t]),L=l.useCallback(e=>{if(!n.current)return null;let t=c.elements.find(t=>t.id===e),a=n.current.querySelector('[data-element-id="'.concat(e,'"]'));return t&&a?{id:e,x:t.x,y:t.y,width:a.offsetWidth,height:a.offsetHeight,left:t.x,top:t.y,right:t.x+a.offsetWidth,bottom:t.y+a.offsetHeight}:null},[c.elements,n]),U=l.useCallback(e=>{if(u&&P(e.clientX,e.clientY),(null==E?void 0:E.isResizing)&&M(e.clientX,e.clientY),m.current&&n.current){let a=n.current.getBoundingClientRect(),l=e.clientX-a.left+n.current.scrollLeft,r=e.clientY-a.top+n.current.scrollTop,i=h.current.x,s=h.current.y,o={x:Math.min(l,i),y:Math.min(r,s),width:Math.abs(l-i),height:Math.abs(r-s)};T.current=o,t({type:"SET_SELECTION_BOX",payload:o})}},[u,E,P,M,n,t]);l.useEffect(()=>{let e=()=>{if(N(),O(),m.current){let e=T.current;if(e){let n=new Set;c.elements.forEach(t=>{let a=L(t.id);a&&e.x<a.right&&e.x+e.width>a.left&&e.y<a.bottom&&e.y+e.height>a.top&&n.add(t.id)}),_.current?t({type:"SET_SELECTED_ELEMENT_IDS",payload:{selectedElementIds:Array.from(new Set([...o,...n]))}}):t({type:"SET_SELECTED_ELEMENT_IDS",payload:{selectedElementIds:Array.from(n)}}),n.size>0&&(S.current=!0)}t({type:"SET_SELECTION_BOX",payload:null}),T.current=null}m.current=!1};return window.addEventListener("mousemove",U),window.addEventListener("mouseup",e),()=>{window.removeEventListener("mousemove",U),window.removeEventListener("mouseup",e)}},[U,N,O,c.elements,L,t,o]);let X=l.useCallback((e,t)=>{0===e.button&&(e.target.closest("[data-resize-handle]")||R(t,e.clientX,e.clientY,e.shiftKey))},[R]),z=l.useCallback((e,t)=>{if(!s||e.target.closest("[data-resize-handle]"))return;let n=e.touches[0];1===e.touches.length&&(y.current=setTimeout(()=>{R(t,n.clientX,n.clientY,e.shiftKey),y.current=null},300))},[s,R]),G=l.useCallback(e=>{if(y.current){var t,n;let a=e.touches[0],l=Math.abs(a.clientX-(null!=(t=null==u?void 0:u.startX)?t:a.clientX)),r=Math.abs(a.clientY-(null!=(n=null==u?void 0:u.startY)?n:a.clientY));(l>5||r>5)&&(clearTimeout(y.current),y.current=null)}if(u){e.preventDefault();let t=e.touches[0];P(t.clientX,t.clientY)}if(null==E?void 0:E.isResizing){e.preventDefault();let t=e.touches[0];M(t.clientX,t.clientY)}},[u,E,P,M]),Y=l.useCallback(()=>{y.current&&(clearTimeout(y.current),y.current=null),N(),O()},[N,O]),W=l.useCallback(e=>{if(S.current){S.current=!1;return}e.target===n.current&&t({type:"SET_SELECTED_ELEMENT_IDS",payload:{selectedElementIds:[]}}),D()},[D,n,t]);return{handleMouseDown:X,handleTouchStart:z,handleTouchMove:G,handleTouchEnd:Y,handleContainerClick:W,handleCanvasMouseDown:l.useCallback(e=>{if(0===e.button&&s&&e.target===n.current){if(e.preventDefault(),m.current=!0,_.current=e.shiftKey,!n.current)return;let a=n.current.getBoundingClientRect();h.current={x:e.clientX-a.left+n.current.scrollLeft,y:e.clientY-a.top+n.current.scrollTop},t({type:"SET_SELECTION_BOX",payload:{...h.current,width:0,height:0}}),e.shiftKey||t({type:"SET_SELECTED_ELEMENT_IDS",payload:{selectedElementIds:[],skipHistory:!0}})}},[s,t,n]),handleResizeStart:A,handleContextMenu:l.useCallback(e=>{var n;if(!s)return;e.preventDefault();let a=null==(n=e.target.closest("[data-element-id]"))?void 0:n.getAttribute("data-element-id");a&&!o.includes(a)&&t({type:"SET_SELECTED_ELEMENT_IDS",payload:{selectedElementIds:[a]}}),t({type:"SET_CONTEXT_MENU",payload:{visible:!0,x:e.clientX,y:e.clientY,elementId:o.length>0?o[0]:void 0}})},[s,o,t]),closeContextMenu:D,addElement:v,deleteElement:x,openEditModal:b,handleUpdateElement:C,handleElementClick:k,getElementRect:L,handleMouseMove:e=>{if(n.current){let t=n.current.getBoundingClientRect();a.current={x:e.clientX-t.left,y:e.clientY-t.top}}}}}(e,t,a,c),{alignElements:k,reorderElement:R}=function(e,t,n,a){let{config:r,selectedElementIds:i}=e;return{alignElements:l.useCallback(e=>{if(i.length<2)return;let a=i.map(e=>n(e)).filter(e=>!!e);if(a.length<2)return;let l=a.find(e=>e.id===i[0]);l&&t({type:"UPDATE_ELEMENTS",payload:{elements:r.elements.map(t=>{if(!i.includes(t.id)||t.id===l.id)return t;let n=a.find(e=>e.id===t.id);if(!n)return t;let r=t.x,s=t.y;switch(e){case"left":r=l.left;break;case"center-h":r=l.left+l.width/2-n.width/2;break;case"right":r=l.right-n.width;break;case"top":s=l.top;break;case"center-v":s=l.top+l.height/2-n.height/2;break;case"bottom":s=l.bottom-n.height}return{...t,x:r,y:s}})}})},[r.elements,i,t,n]),reorderElement:l.useCallback(e=>{if(1!==i.length)return;let n=i[0],l=[...r.elements].sort((e,t)=>(e.zIndex||0)-(t.zIndex||0)),s=l.findIndex(e=>e.id===n);if(-1===s)return;let o=[...r.elements],d=l[s].zIndex||0;switch(e){case"front":o.forEach(e=>{e.id===n&&(e.zIndex=l.length+1)});break;case"back":o.forEach(e=>{e.id===n&&(e.zIndex=0)});break;case"forward":if(s<l.length-1){let e=l[s+1].zIndex||0;o.find(e=>e.id===l[s+1].id).zIndex=d,o.find(e=>e.id===n).zIndex=e}break;case"backward":if(s>0){let e=l[s-1].zIndex||0;o.find(e=>e.id===l[s-1].id).zIndex=d,o.find(e=>e.id===n).zIndex=e}}let c=o.sort((e,t)=>(e.zIndex||0)-(t.zIndex||0));c.forEach((e,t)=>e.zIndex=t+1),t({type:"UPDATE_ELEMENTS",payload:{elements:c}}),a()},[r.elements,i,t,a])}}(e,t,b,g),{handleCopy:P,handlePaste:N,handleSelectAll:A,chromeDialog:M,closeChromeDialog:O}=function(e,t){let[n,a]=l.useState(null),{toast:i}=(0,r.dj)(),{selectedElementIds:s,config:o}=e,d=l.useRef([]),c=l.useCallback(()=>{let e,t=navigator.userAgent.includes("Chrome")&&!navigator.userAgent.includes("Edg"),n="Please allow clipboard access in your browser settings.";if(t&&1){let t=window.location.origin,l="chrome://settings/content/siteDetails?site=".concat(t);n="For Chrome, please click this message to open settings. ".concat(l),e=()=>{a({open:!0,url:l})}}i({variant:"destructive",title:"Clipboard permission denied",description:n,duration:3e4,onClick:e})},[i]),u=l.useCallback(async()=>{if(s.length>0)try{let e=o.elements.filter(e=>s.includes(e.id));d.current=e,await navigator.clipboard.writeText(JSON.stringify(e,null,2)),i({title:"Copied ".concat(s.length," element(s) to clipboard")})}catch(e){"NotAllowedError"===e.name?c():i({variant:"destructive",title:"Copy failed",description:"Could not copy elements to clipboard."})}},[s,o.elements,i,c]);return{handleCopy:u,handlePaste:l.useCallback(async e=>{try{let n=await navigator.clipboard.readText(),a=JSON.parse(n);if(Array.isArray(a)&&a.every(e=>e.id&&e.type&&null!=e.x&&null!=e.y)){let n=Math.max(0,...o.elements.map(e=>e.zIndex||0)),l=a.reduce((e,t)=>({minX:Math.min(e.minX,t.x),minY:Math.min(e.minY,t.y)}),{minX:1/0,minY:1/0}),r=e.x-l.minX,s=e.y-l.minY,d=a.map(e=>(n++,{...e,id:Date.now().toString()+Math.random(),x:e.x+r,y:e.y+s,zIndex:n})),c=d.map(e=>e.id);t({type:"UPDATE_ELEMENTS",payload:{elements:[...o.elements,...d]}}),t({type:"SET_SELECTED_ELEMENT_IDS",payload:{selectedElementIds:c}}),i({title:"Pasted ".concat(d.length," element(s)")})}}catch(e){"NotAllowedError"===e.name?c():(console.error("Failed to paste from clipboard:",e),i({variant:"destructive",title:"Paste failed",description:"Could not paste from clipboard. The content may not be valid."}))}},[o.elements,t,i,c]),handleSelectAll:l.useCallback(()=>{t({type:"SET_SELECTED_ELEMENT_IDS",payload:{selectedElementIds:o.elements.map(e=>e.id)}})},[o.elements,t]),chromeDialog:n,closeChromeDialog:()=>a(null)}}(e,t),L=l.useCallback(()=>{t({type:"UNDO"})},[t]);return!function(e,t,n,a){let{isEditMode:r,editingElement:i,selectedElementIds:s,config:o}=e,{handleCopy:d,handlePaste:c,deleteElement:u,handleSelectAll:E,handleUndo:p}=n,f=l.useCallback(async e=>{if(!r||i)return;if(e.metaKey||e.ctrlKey){if("c"===e.key){e.preventDefault(),d();return}if("v"===e.key){e.preventDefault(),await c(a.current);return}if("a"===e.key){e.preventDefault(),E(),setTimeout(()=>{d()},0);return}if("z"===e.key){e.preventDefault(),p();return}}if(0===s.length)return;let n=0,l=0;switch(e.key){case"ArrowUp":l=-1;break;case"ArrowDown":l=1;break;case"ArrowLeft":n=-1;break;case"ArrowRight":n=1;break;case"Delete":case"Backspace":e.preventDefault(),u();return;default:return}e.preventDefault(),t({type:"UPDATE_ELEMENTS",payload:{elements:o.elements.map(e=>s.includes(e.id)?{...e,x:e.x+n,y:e.y+l}:e)}})},[r,i,s,o.elements,t,d,c,u,E,p,a]);l.useEffect(()=>(window.addEventListener("keydown",f),()=>{window.removeEventListener("keydown",f)}),[f])}(e,t,{handleCopy:P,handlePaste:N,deleteElement:w,handleSelectAll:A,handleUndo:L},c),{...e,mainContainerRef:a,handleEditModeToggle:u,handlePasswordSubmit:E,setPasswordInput:e=>t({type:"SET_PASSWORD_INPUT",payload:e}),handleContextMenu:_,closeContextMenu:g,addElement:I,deleteElement:w,openEditModal:D,handleUpdateElement:v,setEditingElement:e=>t({type:"SET_EDITING_ELEMENT",payload:e}),handleElementClick:x,handleMouseDown:p,handleTouchStart:f,handleTouchMove:y,handleTouchEnd:m,handleContainerClick:h,handleCanvasMouseDown:T,alignElements:k,reorderElement:R,setShowJsonExport:e=>t({type:"SET_SHOW_JSON_EXPORT",payload:e}),setShowPasswordPrompt:e=>t({type:"SET_SHOW_PASSWORD_PROMPT",payload:e}),handleResizeStart:S,handleMouseMove:C,handleUndo:L,chromeDialog:M,closeChromeDialog:O}}();return(0,a.jsx)(c.Provider,{value:n,children:t})},E=()=>{let e=(0,l.useContext)(c);if(void 0===e)throw Error("usePageEditorContext must be used within a PageEditorProvider");return e}}}]);